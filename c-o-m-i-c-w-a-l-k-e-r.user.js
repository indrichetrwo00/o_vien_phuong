// ==UserScript==
// @name         c-o-m-i-c-w-a-l-k-e-r
// @namespace    https://github.com/indrichetrwo00/o_vien_phuong/raw/main/c-o-m-i-c-w-a-l-k-e-r.user.js
// @version      2024.03.27
// @description  down c-o-m-i-c-w-a-l-k-e-r
// @author       You
// @include      /^https:\/\/c[o0]mic\-w[a@]lker\.c[o0]m\x2Fd[e0]tail\x2F.+\x2Fe[p0]isodes\x2F.+/
// @icon         https://raw.githubusercontent.com/indrichetrwo00/o_vien_phuong/main/c-o-m-i-c-w-a-l-k-e-r.png
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        none
// @downloadURL  https://github.com/indrichetrwo00/o_vien_phuong/raw/main/c-o-m-i-c-w-a-l-k-e-r.user.js
// @updateURL    https://github.com/indrichetrwo00/o_vien_phuong/raw/main/c-o-m-i-c-w-a-l-k-e-r.meta.js
// ==/UserScript==

(function(_0x3a9391,_0x5883fd){const _0x600e1f=a0_0x458b,_0x2ba9f0=_0x3a9391();while(!![]){try{const _0x392d0d=parseInt(_0x600e1f(0x196))/0x1*(parseInt(_0x600e1f(0x1b1))/0x2)+-parseInt(_0x600e1f(0x1ab))/0x3+-parseInt(_0x600e1f(0x1cf))/0x4+parseInt(_0x600e1f(0x19c))/0x5*(parseInt(_0x600e1f(0x197))/0x6)+-parseInt(_0x600e1f(0x1bb))/0x7*(parseInt(_0x600e1f(0x199))/0x8)+-parseInt(_0x600e1f(0x1b4))/0x9+parseInt(_0x600e1f(0x189))/0xa;if(_0x392d0d===_0x5883fd)break;else _0x2ba9f0['push'](_0x2ba9f0['shift']());}catch(_0x329b8b){_0x2ba9f0['push'](_0x2ba9f0['shift']());}}}(a0_0x234c,0xce3d4));function a0_0x458b(_0x421468,_0x5f07b4){const _0x234c0a=a0_0x234c();return a0_0x458b=function(_0x458b42,_0x3d3d63){_0x458b42=_0x458b42-0x188;let _0x162f21=_0x234c0a[_0x458b42];return _0x162f21;},a0_0x458b(_0x421468,_0x5f07b4);}let downloading_current=0x0,downloading_total=0x0;function sleep(_0x23ebc1){return new Promise(_0x59137d=>setTimeout(_0x59137d,_0x23ebc1));}const populateKey=_0x547f70=>{const _0x37dd44=a0_0x458b;let _0x424b46=_0x547f70[_0x37dd44(0x19a)](0x0,0x10)[_0x37dd44(0x1aa)](/[\da-f]{2}/gi);return new Uint8Array(_0x424b46[_0x37dd44(0x1af)](_0x29193d=>parseInt(_0x29193d,0x10)));},xor=(_0x5aa2d8,_0x19f76e)=>{let {length:_0x29bf5b}=_0x5aa2d8,{length:_0x1e109e}=_0x19f76e,_0x3d290a=new Uint8Array(_0x29bf5b);for(let _0x5443ba=0x0;_0x5443ba<_0x29bf5b;_0x5443ba+=0x1)_0x3d290a[_0x5443ba]=_0x5aa2d8[_0x5443ba]^_0x19f76e[_0x5443ba%_0x1e109e];return _0x3d290a;},download_encrypted=async(_0x3b9bcd,_0x298960,_0x149cf9)=>{const _0x388bc3=a0_0x458b,_0xaaebba=await fetch(_0x3b9bcd),_0x420fab=await _0xaaebba['arrayBuffer'](),_0x34b3e7=new Uint8Array(_0x420fab),_0x132256=populateKey(_0x298960),_0x3f4906=xor(_0x34b3e7,_0x132256),_0x155314=new DataView(_0x3f4906[_0x388bc3(0x1cb)],_0x3f4906[_0x388bc3(0x19e)],_0x3f4906[_0x388bc3(0x1d3)]),_0x376625=_0x155314[_0x388bc3(0x1c3)](0x0,![])[_0x388bc3(0x195)](0x10);if(_0x376625===_0x388bc3(0x18b)){const _0x53800e=new Blob([_0x3f4906],{'type':_0x388bc3(0x1a2)});saveAs(_0x53800e,(''+_0x149cf9)['padStart'](0x3,'0')+_0x388bc3(0x18c)),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0x376625==='89504e47'){const _0x44eb13=new Blob([_0x3f4906],{'type':_0x388bc3(0x1b9)});saveAs(_0x44eb13,(''+_0x149cf9)[_0x388bc3(0x1c2)](0x3,'0')+'.png'),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0x20b470=new Blob([_0x3f4906],{'type':'image/jpeg'});saveAs(_0x20b470,(''+_0x149cf9)[_0x388bc3(0x1c2)](0x3,'0')+_0x388bc3(0x198)),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}};function update_status(){const _0x48d2f9=a0_0x458b;document[_0x48d2f9(0x1c0)]('.status-num')[_0x48d2f9(0x1b7)]['display']=_0x48d2f9(0x194),document[_0x48d2f9(0x1c0)](_0x48d2f9(0x1b3))[_0x48d2f9(0x1b7)]['alignItems']=_0x48d2f9(0x1b8),document[_0x48d2f9(0x1c0)]('.status-num')['innerHTML']=downloading_current+_0x48d2f9(0x1b5)+downloading_total;}function create_status_box(){const _0x2d55d7=a0_0x458b;let _0xa846f8=document['createElement']('div');return _0xa846f8[_0x2d55d7(0x1c7)]=_0x2d55d7(0x1c5),_0xa846f8[_0x2d55d7(0x1ce)]=downloading_current+_0x2d55d7(0x1b5)+downloading_total,_0xa846f8;}function a0_0x234c(){const _0x16fbc7=['heartbeat','page','&imageSizeType=width%3A1284','data','31365080wiXkBO','episode','52494646','.webp','stylesheet','left','gap','createElement','pointer','src','drmImageUrl','flex','toString','537953kABnDk','552054axgLsm','.jpg','80MACSAt','slice','href','5JrbLgT','transform','byteOffset','top','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','width','image/webp','link','setAttribute','alignItems','#heartbeat','1.5rem','zIndex','click','match','531822sBxYsB','drmHash','position','state','map','c(bRVK%$BeZ49LJY-u,:a*Pgd!3iNGqS27p@.Aj_Xvt^5lhEMTF;&zOxrsf)Qm0DW1nCIHw8U6ok+y','2fxYFwc','/api/contents/viewer?episodeId=','.status-num','1863810hMgESE','\x20/\x20','pageProps','style','center','image/png','display','942578bnOSvn','img','splice','appendChild','head','querySelector','rel','padStart','getUint32','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','status-num','50vw','className','addEventListener','insertBefore','tai-ve','buffer','getElementsByTagName','div','textContent','4763240oVrTEG','queries','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x204rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','length','byteLength','https://'];a0_0x234c=function(){return _0x16fbc7;};return a0_0x234c();}function create_download_icon(){const _0x436c17=a0_0x458b;let _0x1a11e5=document[_0x436c17(0x190)](_0x436c17(0x1cd)),_0x42ba97=document[_0x436c17(0x190)](_0x436c17(0x1bc));_0x42ba97[_0x436c17(0x1c7)]=_0x436c17(0x1ca),_0x42ba97[_0x436c17(0x1a4)](_0x436c17(0x192),_0x436c17(0x1a0)),_0x42ba97['style'][_0x436c17(0x1a1)]='3rem',_0x42ba97[_0x436c17(0x1b7)]['cursor']=_0x436c17(0x191),_0x1a11e5['appendChild'](_0x42ba97);let _0x5ce363=document[_0x436c17(0x190)](_0x436c17(0x1a3));_0x5ce363[_0x436c17(0x1c1)]=_0x436c17(0x18d),_0x5ce363[_0x436c17(0x19b)]='https://fonts.googleapis.com/css2?family=Acme&display=swap',document[_0x436c17(0x1cc)]('head')[0x0][_0x436c17(0x1be)](_0x5ce363);let _0x3da20e=document['createElement']('div');_0x3da20e['className']='status',_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x1ba)]=_0x436c17(0x194),_0x3da20e[_0x436c17(0x1b7)]['justifyContent']=_0x436c17(0x1b8),_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x1a5)]=_0x436c17(0x1b8),_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x18f)]=_0x436c17(0x1a7),_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x1ad)]='absolute',_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x1a8)]='10000',_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x19f)]='0.5rem',_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x18e)]=_0x436c17(0x1c6),_0x3da20e[_0x436c17(0x1b7)][_0x436c17(0x19d)]='translate(-50%)';let _0x17efbf=create_status_box();const _0x5883ec=document[_0x436c17(0x190)](_0x436c17(0x1b7));_0x5883ec[_0x436c17(0x1ce)]=_0x436c17(0x1d1),document[_0x436c17(0x1bf)][_0x436c17(0x1be)](_0x5883ec),_0x3da20e[_0x436c17(0x1be)](_0x1a11e5),_0x3da20e[_0x436c17(0x1be)](_0x17efbf);let _0x45920c=document[_0x436c17(0x1c0)]('body'),_0x44a425=_0x45920c['firstChild'];return _0x45920c[_0x436c17(0x1c9)](_0x3da20e,_0x44a425),_0x3da20e;}const throttlePromises=async(_0x31bc57,_0x436d8a)=>{const _0x4585f1=a0_0x458b;while(_0x31bc57['length']>0x0){await Promise['all'](_0x31bc57[_0x4585f1(0x1bd)](0x0,_0x436d8a)[_0x4585f1(0x1af)](_0x2dd211=>_0x2dd211())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x11dda8=a0_0x458b;let _0x1cea7e=document[_0x11dda8(0x1c0)](_0x11dda8(0x1a6));!_0x1cea7e&&(_0x1cea7e=document['createElement'](_0x11dda8(0x1b7)),_0x1cea7e[_0x11dda8(0x1a4)]('id',_0x11dda8(0x1d5)),document[_0x11dda8(0x1bf)]['appendChild'](_0x1cea7e)),_0x1cea7e[_0x11dda8(0x1ce)]=_0x11dda8(0x1c4);},off_heartbeat_css=()=>{const _0x52b8a0=a0_0x458b,_0x272e1c=document[_0x52b8a0(0x1c0)](_0x52b8a0(0x1a6));_0x272e1c[_0x52b8a0(0x1ce)]='';},deobfuscateString=()=>{const _0x1e3ae7=a0_0x458b;let _0x7546c7='';const _0x273ccc=_0x1e3ae7(0x1b0);return _0x7546c7+=_0x273ccc[0x0],_0x7546c7+=_0x273ccc[0x4a],_0x7546c7+=_0x273ccc[0x3d],_0x7546c7+=_0x273ccc[0x1b],_0x7546c7+=_0x273ccc[0x0],_0x7546c7+=_0x273ccc[0x10],_0x7546c7+=_0x273ccc[0x46],_0x7546c7+=_0x273ccc[0x14],_0x7546c7+=_0x273ccc[0x2d],_0x7546c7+=_0x273ccc[0x4b],_0x7546c7+=_0x273ccc[0x9],_0x7546c7+=_0x273ccc[0x38],_0x7546c7+=_0x273ccc[0x24],_0x7546c7+=_0x273ccc[0x0],_0x7546c7+=_0x273ccc[0x4a],_0x7546c7+=_0x273ccc[0x3d],_0x7546c7;};((async()=>{const _0x5d3841=a0_0x458b,_0x5d3cfa=__NEXT_DATA__['props'][_0x5d3841(0x1b6)]['dehydratedState'][_0x5d3841(0x1d0)][0x2][_0x5d3841(0x1ae)][_0x5d3841(0x188)][_0x5d3841(0x18a)]['id'],_0x283875=_0x5d3841(0x1d4)+deobfuscateString()+(_0x5d3841(0x1b2)+_0x5d3cfa+_0x5d3841(0x1d7)),_0x359e25=await fetch(_0x283875),_0x5d36ca=await _0x359e25['json'](),_0x591deb=_0x5d36ca['manuscripts'];if(_0x591deb[_0x5d3841(0x1d2)]>0x0){downloading_total=_0x591deb['length'];const _0x1e423f=create_download_icon();_0x1e423f[_0x5d3841(0x1c8)](_0x5d3841(0x1a9),async()=>{const _0x59042e=_0x5d3841;on_heartbeat_css(),downloading_current=0x0;let _0xbdddb6;_0xbdddb6=_0x591deb[_0x59042e(0x1af)](_0x46cfd4=>()=>download_encrypted(_0x46cfd4[_0x59042e(0x193)],_0x46cfd4[_0x59042e(0x1ac)],_0x46cfd4[_0x59042e(0x1d6)])),await throttlePromises(_0xbdddb6,0x2);});}})());
